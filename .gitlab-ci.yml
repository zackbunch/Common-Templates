# .gitlab-ci.yml

include:
  - local: /.gitlab/docker.gitlab-ci.yml
  - local: /.gitlab/job-rules.gitlab-ci.yml
  - local: /.gitlab/container-scan.gitlab-ci.yml
  - local: /.gitlab/secrets.gitlab-ci.yml

stages:
  - build
  - scan

# This is the main build job for your container.
# It uses the .build_image_template for the logic
# and .rule:build-simple for the rules.
build:docker:
  stage: build
  extends: .build_image_template
  # You can set container-specific variables here
  variables:
    APP_NAME: "templates"
    PUSH_ON_FEATURE: "true" # Uncomment to push images for feature branches
  rules: !reference [.rule:build-simple, rules]

